# 测试环境配置（考官出考卷）
testenv:
  # 数据配置
  dataset:
    # 数据地址， 字符串类型， 必填， 默认值是 ""；
    # 当前支持数据文件格式有csv(结构化数据）、txt(非结构化数据）；
    # todo: 暴露接口，支持用户自定义数据格式转换；
    url: "/ianvs/dataset/pcb_imgs/index.txt"
    # 模型训练数据集比例， 浮点类型， 可选，默认值是 0.8；
    train_ratio: 0.8
    # 数据拆分方式，字符串类型， 可选，默认值是 "default"
    # "default"方法： 数据列表按照eval_ratio比例切分；
    splitting_method: "default"

  # 同个算法单个模型的评估配置，字典类型，可选，默认值是 {} ；
  # 可选，仅用于终身学习范式的评估阶段：筛选给定算法训练后的任务模型，仅把筛选出的任务模型传递给推理阶段，其它任务模型不传递
  # 也即在边云协同推理、联邦学习、增量学习范式无需填写下列配置
  model_eval:
    # 模型评估的指标计算方法， 字符串类型, 可选， 默认值是 "" ；
    # TODO： 列举部分可选指标
    # TODO：更多指标及各指标文档详见：关联Sedna lib 文档
    model_metric:
      # 模型的评估指标计算方法。仅使用唯一指标进行评估和模型筛选，暂不支持容易导致系统混乱的多指标评估。
      name: "f1_score"
      url: "./examples/pcb-aoi/benchmarkingjob/testenv/f1_score.py"
      # 模型评估的指标计算方法的入参， 字典类型， 可选， 默认值是 {} ；
      # parameters: { "average": "micro" }
    # 评估指标的阈值，浮点类型， 可选， 默认值是 0.9 ；
    # 也即大于此阈值的任务模型将被传递到推理阶段，否则不传递
    threshold: 0
    operator: ">="

  # ianvs评估的指标计算方法，列表类型， 必填，当前metrics.py内置支持 "smape" 和 "max_error_rate"；
  # 单个算法的评估指标。注：在终身学习中单个算法可能产生多个模型，此处为单个算法多个模型的端到端评估指标
  # 可以填写希望显示的多个指标
  # TODO： 指标按照列举先后顺序作为优先级排序，比如列在前面的优先级更高
  # Todo: 目前仅支持内置，用户需要增加时就修改内置metrics.py，后续支持用户自定义指标
  metrics:
    - name: "f1_score"
      url: "./examples/pcb-aoi/benchmarkingjob/testenv/f1_score.py"

  # 终身学习范式和增量学习范式支持增量轮次配置, 整数类型，可选， 默认值是 2 ；
  # 增量轮次是指除初始轮次外的补充轮次，根据增量轮次和初始轮次平均分配训练数据
  # 比如训练数据除初始轮次外有2轮增量，则初始轮次、首次增量轮次，最终增量轮次各得到1/3训练数据；
  incremental_rounds: 1